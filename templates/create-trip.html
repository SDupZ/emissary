{% extends "base.html" %}

{% block header %}
    {% include 'includes/_header.html' with color="white" %}
{% endblock %}

{% block main-content %}
    <div class="page">
        <div class="container container--thin">
            <div class="heading__page">
                Add a single trip
            </div>

            <form role="form" action="" method="post">
                {% csrf_token %}
                <ol class="list--ordered">
                    <li class="list__item">
                        <div class="heading__content">Where are you headed?</div>
                        <p><label for="id_origin">Origin</label>
                            <div id="id_origin">
                              <input id="autocomplete_origin" placeholder="Origin Location" type="text"></input>
                            </div>
                        </p>
                        <p><label for="id_destination">Destination</label>
                            <div id="id_destination">
                              <input id="autocomplete_destination" placeholder="Destination Location" type="text"></input>
                            </div>
                        </p>
                    </li>

                    {% verbatim %}
                    <li class="list__item">
                        <div class="heading__content">Choose a day</div>

                        <div id="app">

                            <div class="calendar__wrapper">

                                <div class="calendar__heading-row">
                                    <div v-if="currentMonth == 0"></div>
                                    <div class="left-arrow" v-on:click.prevent="currentMonth -= 1" v-if="currentMonth > 0" ></div>
                                    {{ timeData[currentMonth].month }} {{ timeData[currentMonth].year }}
                                    <div class="right-arrow" v-on:click.prevent="currentMonth += 1" v-if="currentMonth < totalMonths - 1"></div>
                                    <div v-if="currentMonth == totalMonths - 1"></div>
                                </div>

                                <div class="calendar__weekday-heading-row">
                                    <div class="calendar__weekday-heading">Su</div>
                                    <div class="calendar__weekday-heading">Mo</div>
                                    <div class="calendar__weekday-heading">Tu</div>
                                    <div class="calendar__weekday-heading">We</div>
                                    <div class="calendar__weekday-heading">Th</div>
                                    <div class="calendar__weekday-heading">Fr</div>
                                    <div class="calendar__weekday-heading">Sa</div>
                                </div>

                                <div v-for="i in Math.ceil(timeData[currentMonth].days.length / daysPerRow )" class="calendar__day-row">
                                    <template v-for="day in timeData[currentMonth].days.slice( (i-1) * daysPerRow, (i-1) * daysPerRow + daysPerRow)">
                                        <template v-if="day.placeholder">
                                            <input type="radio" name="date" v-bind:id="day.id" class="weekday" v-bind:value="day.value"/>
                                            <label v-bind:for="day.id" class="placeholder">{{ day.dayOfMonth }}</label>
                                        </template>
                                        <template v-if="!day.placeholder">
                                            <input type="radio" name="date" v-bind:id="day.id" class="weekday" v-bind:value="day.value"/>
                                            <label v-bind:for="day.id">{{ day.dayOfMonth }}</label>
                                        </template>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </li>
                    {% endverbatim %}

                    <li class="list__item">
                        <div class="heading__content">Choose a time</div>
                        <input type="text" class="timepicker timepicker--create-trip" name="leaving_time"/>
                    </li>

                    <li class="list__item">
                        <div class="heading__content">Finish</div>
                        <div class="wrapper--center">
                            <button class="button" type="submit">Submit</button>
                        </div>
                    </li>

                </ol>


                {# Hidden form elements #}
                <input id="origin_street_number" type=hidden name="origin_street_number" value=""></input>
                <input id="origin_street_name" type=hidden name="origin_street_name" value=""></input>
                <input id="origin_city" type=hidden name="origin_city" value=""></input>
                <input id="origin_country" type=hidden name="origin_country" value=""></input>
                <input id="origin_post_code" type=hidden name="origin_post_code" value=""></input>

                <input id="destination_street_number" type=hidden name="destination_street_number" value=""></input>
                <input id="destination_street_name" type=hidden name="destination_street_name" value=""></input>
                <input id="destination_city" type=hidden name="destination_city" value=""></input>
                <input id="destination_country" type=hidden name="destination_country" value=""></input>
                <input id="destination_post_code" type=hidden name="destination_post_code" value=""></input>

            </form>
        </div>
    </div>
{% endblock main-content %}


{% block scripts %}
    <!-- Source -->
    <script type="text/javascript" src="/static/js/src/handleCalendar.js"></script>
    <script type="text/javascript" src="/static/js/vendors/jquery.timepicker.min.js"></script>
    <script type="text/javascript" src="/static/js/src/handleTimepicker.js"></script>
    <script type="text/javascript" src="/static/js/src/handleAutoCompleteField.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyChiicnWCYnWyc84sieGT_jcEobKs_oqaE&libraries=places&callback=initAutocomplete" async defer></script>
{% endblock scripts %}
